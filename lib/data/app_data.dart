import 'package:flutter/material.dart';
import '../models/data_models.dart';

class AppDataRepository {
  // ==========================================
  // لیست کتاب‌های مرجع (کتابخانه رشد)
  // ==========================================
  static List<BookModel> getBooks() {
    return [
      BookModel(
        id: '1',
        title: 'از حال بد به حال خوب',
        author: 'دکتر دیوید برنز',
        category: 'شناخت‌درمانی (CBT)',
        coverColor: Colors.blueAccent,
        icon: Icons.psychology,
        summary: """
این کتاب (Feeling Good) انجیل رفتاردرمانی شناختی است. ایده اصلی این است که «افکار» شما احساسات شما را می‌سازند، نه وقایع بیرونی. اگر یاد بگیرید فکرتان را عوض کنید، حالتان خوب می‌شود.
دکتر برنز ثابت می‌کند که اضطراب، افسردگی و خشم، ناشی از «خطاهای شناختی» هستند که مثل عینک‌های کثیف، واقعیت را جلوی چشم ما تیره و تار می‌کنند.
        """,
        keyLearnings: [
          'هیچ‌گاه احساسات را با واقعیت اشتباه نگیرید (استدلال احساسی).',
          'افکار منفی اتوماتیک هستند، اما لزوماً واقعی نیستند.',
          'با نوشتن افکار، قدرت آن‌ها را خنثی کنید (تکنیک سه ستونی).',
        ],
        realLifeExamples: [
          'ذهن‌خوانی: همسرم ساکت است -> حتماً از دست من عصبانی است (واقعیت: شاید خسته است).',
          'فیلتر منفی: در یک مهمانی ۱۰ نفر تعریف کردند و ۱ نفر انتقاد کرد -> کل شب به آن یک نفر فکر می‌کنم.',
          'تفکر همه یا هیچ: اگر در امتحان ۲۰ نشوم، یعنی شکست‌خورده‌ام.',
          'برچسب‌زنی: به جای اینکه بگویم "اشتباه کردم"، می‌گویم "من احمقم".',
        ],
      ),
      BookModel(
        id: '2',
        title: 'موهبت کامل نبودن',
        author: 'برنی براون',
        category: 'پذیرش خود',
        coverColor: Colors.pinkAccent,
        icon: Icons.favorite,
        summary: """
کمال‌گرایی زره‌ای است که می‌پوشیم تا آسیب نبینیم، اما این زره آنقدر سنگین است که اجازه نمی‌دهد پرواز کنیم.
پیام اصلی کتاب این است: «شجاعت یعنی با وجود تمام نقص‌هایت، خودت را نشان بدهی.» ما فکر می‌کنیم اگر کامل باشیم، دوست‌داشتنی می‌شویم. اما واقعیت این است که ما به خاطر «نقص‌هایمان» و انسان بودنمان به هم وصل می‌شویم.
        """,
        keyLearnings: [
          'شرم، ترس از قطع ارتباط است (نکند من ایرادی دارم؟).',
          'آسیب‌پذیری ضعف نیست، بلکه بزرگترین معیار شجاعت است.',
          'به جای اینکه بگویید "من چه کار اشتباهی کردم؟"، بگویید "من کافی هستم".',
        ],
        realLifeExamples: [
          'اعتراف به اشتباه: به جای پنهان کردن تپق زدن در سخنرانی، بخندید و بگویید "زبانم نچرخید!".',
          'نه گفتن: دعوت شام را رد کنید چون خسته‌اید، بدون اینکه دروغ بگویید.',
          'ظاهر واقعی: عکس بدون فیلتر و روتوش در شبکه اجتماعی بگذارید.',
        ],
      ),
      BookModel(
        id: '3',
        title: 'زندگی خود را دوباره بیافرینید',
        author: 'جفری یانگ',
        category: 'طرحواره‌درمانی',
        coverColor: Colors.purple,
        icon: Icons.child_care,
        summary: """
این کتاب به شناسایی ۱۱ «تله زندگی» (طرحواره) می‌پردازد که ریشه در کودکی دارند و مدام در زندگی بزرگسالی ما تکرار می‌شوند. تله‌هایی مثل «رهاشدگی»، «بی‌ارزشی» و «اطاعت».
راهکار اصلی، شناختن «کودک درون» آسیب‌دیده و تبدیل شدن به یک والد مهربان برای خود است.
        """,
        keyLearnings: [
          'الگوهای تکراری زندگی (شکست در روابط، شغل) تصادفی نیستند.',
          'کودک درون شما هنوز زنده است و نیاز به توجه دارد.',
          'با تغییر رفتار، طرحواره ضعیف می‌شود.',
        ],
        realLifeExamples: [
          'تله اطاعت: همیشه نظر بقیه را می‌پرسید و نظر خودتان را نمی‌گویید.',
          'تله رهاشدگی: وقتی شریک عاطفی‌تان دیر جواب می‌دهد، دچار پنیک می‌شوید.',
          'تله نقص: فکر می‌کنید اگر کسی شما را واقعی بشناسد، طردتان می‌کند.',
        ],
      ),
      BookModel(
        id: '4',
        title: 'عادت‌های اتمی',
        author: 'جیمز کلیر',
        category: 'رشد فردی',
        coverColor: Colors.orange,
        icon: Icons.trending_up,
        summary: """
تغییرات بزرگ با قدم‌های کوچک شروع می‌شوند. اگر روزی ۱ درصد بهتر شوید، در پایان سال ۳۷ برابر بهتر شده‌اید.
عزت‌نفس نتیجه‌ی «رای‌هایی» است که با عملکردهای کوچک به خودتان می‌دهید. هر بار که به باشگاه می‌روید، یک رای به هویت «من ورزشکارم» می‌دهید.
        """,
        keyLearnings: [
          'روی سیستم‌ها تمرکز کنید، نه اهداف.',
          'قانون ۲ دقیقه: هر عادت جدید را به کاری ۲ دقیقه‌ای تبدیل کنید.',
          'هویت خود را تغییر دهید: نگو "می‌خواهم سیگار را ترک کنم"، بگو "من سیگاری نیستم".',
        ],
        realLifeExamples: [
          'به جای هدف "نوشتن کتاب"، روزی ۲ خط بنویسید.',
          'محیط را طراحی کنید: اگر می‌خواهید گیتار بزنید، آن را وسط اتاق بگذارید نه در کمد.',
          'زنجیره را قطع نکنید: حتی در روزهای بد، یک حرکت کوچک انجام دهید.',
        ],
      ),
      BookModel(
        id: '5',
        title: 'شش ستون عزت‌نفس',
        author: 'ناتانیل براندن',
        category: 'روانشناسی کلاسیک',
        coverColor: Colors.teal,
        icon: Icons.account_balance,
        summary: """
این کتاب جامع‌ترین مرجع درباره عزت‌نفس است. براندن معتقد است عزت‌نفس «تجربه توانمند بودن برای زندگی» است.
شش ستون شامل: زندگی آگاهانه، پذیرش خویشتن، مسئولیت‌پذیری، ابراز وجود، زندگی هدفمند و یکپارچگی شخصی.
        """,
        keyLearnings: [
          'عزت‌نفس یک احساس نیست، بلکه نتیجه عملکرد ماست.',
          'هیچ‌کس قرار نیست بیاید و شما را نجات دهد (مسئولیت‌پذیری).',
          'پذیرش خویشتن پیش‌شرط تغییر است.',
        ],
        realLifeExamples: [
          'زندگی آگاهانه: وقتی می‌دانید سیگار مضر است، خودتان را فریب ندهید.',
          'ابراز وجود: وقتی با نظر جمع مخالفید، مودبانه نظر خودتان را بگویید.',
          'یکپارچگی: وقتی قولی می‌دهید، حتماً به آن عمل کنید.',
        ],
      ),
      BookModel(
        id: '6',
        title: 'شفقت با خود',
        author: 'کریستین نف',
        category: 'خوددوستی',
        coverColor: Colors.redAccent,
        icon: Icons.favorite_border,
        summary: """
چرا با دوستانمان مهربان‌تر از خودمان هستیم؟ این کتاب به شما یاد می‌دهد که چگونه با خودتان مثل یک دوست صمیمی رفتار کنید، مخصوصاً در زمان شکست.
شفقت با خود سه مولفه دارد: مهربانی با خود، انسانیت مشترک (همه اشتباه می‌کنند) و ذهن‌آگاهی.
        """,
        keyLearnings: [
          'خودانتقادی انگیزه نمی‌دهد، بلکه فلج می‌کند.',
          'درد و رنج بخشی از تجربه مشترک انسانی است، شما تنها نیستید.',
          'وقتی درد دارید، اولین کاری که باید بکنید، آرام کردن خودتان است.',
        ],
        realLifeExamples: [
          'وقتی اشتباه کردید: به جای "احمق"، بگویید "اشکال نداره، دفعه بعد بهتر میشم".',
          'لمس آرامش‌بخش: دست روی قلب گذاشتن وقتی استرس دارید.',
          'نامه به خود: نوشتن نامه‌ای از زبان یک دوست خیالی مهربان به خودتان.',
        ],
      ),
      BookModel(
        id: '7',
        title: 'چهار میثاق',
        author: 'دون میگوئل روئیز',
        category: 'خرد سرخپوستی',
        coverColor: Colors.deepOrange,
        icon: Icons.lightbulb_outline,
        summary: """
چهار اصل ساده اما قدرتمند برای رهایی از رنج و رسیدن به آزادی شخصی:
۱. با کلام خود گناه نکنید (غیبت نکنید، به خودتان بد نگویید).
۲. هیچ چیز را به خود نگیرید (رفتار دیگران بازتاب خودشان است).
۳. تصورات باطل نکنید (سوال بپرسید، ذهن‌خوانی نکنید).
۴. همیشه بیشترین تلاشتان را بکنید.
        """,
        keyLearnings: [
          'کلمات جادو هستند، می‌توانند شفا دهند یا بیمار کنند.',
          'وقتی کسی به شما توهین می‌کند، دارد زهر درونی خودش را بیرون می‌ریزد.',
          'تلاش کردن مهم‌تر از نتیجه گرفتن است.',
        ],
        realLifeExamples: [
          'وقتی راننده‌ای بوق می‌زند، به خودتان نگیرید، شاید عجله دارد.',
          'به جای اینکه فکر کنید همسرتان ناراحت است، از او بپرسید.',
          'به خودتان نگویید "من زشتم"، کلامتان را پاک کنید.',
        ],
      ),
      BookModel(
        id: '8',
        title: 'جرأت بسیار',
        author: 'برنی براون',
        category: 'شجاعت',
        coverColor: Colors.amber,
        icon: Icons.local_fire_department,
        summary: """
آسیب‌پذیری ضعف نیست، بلکه دقیق‌ترین معیار سنجش شجاعت است.
کسی که از شکست می‌ترسد، هیچوقت وارد میدان نمی‌شود. شعار کتاب این است: «در میدان باش». حتی اگر صورتت خاکی و خونین شود، بهتر از این است که تماشاچی باشی که هیچوقت شکست نمی‌خورد اما پیروز هم نمی‌شود.
        """,
        keyLearnings: [
          'شرم در سکوت رشد می‌کند؛ با حرف زدن درباره‌اش، می‌میرد.',
          'ما نمی‌توانیم احساسات بد را بی‌حس کنیم بدون اینکه احساسات خوب را هم بی‌حس کنیم.',
          'ارزش‌های خود را بشناسید و بر اساس آن‌ها زندگی کنید.',
        ],
        realLifeExamples: [
          'شروع یک کسب‌وکار جدید با وجود احتمال شکست.',
          'گفتن "دوستت دارم" اول، بدون تضمین شنیدن پاسخ.',
          'ارائه یک اثر هنری ناتمام به جمع.',
        ],
      ),
    ];
  }

  // ==========================================
  // برنامه ۳۰ روزه (مسیر رشد)
  // ==========================================
  static List<DayPlanModel> get30DayPlan() {
    final books = getBooks();

    return List.generate(30, (index) {
      int day = index + 1;

      // تعیین نوع تمرین بر اساس الگوی تکرار ۴ روزه
      // روز ۱: دفترچه (آگاهی)
      // روز ۲: دادگاه (منطق)
      // روز ۳: ضبط صدا (احساس)
      // روز ۴: نردبان (اقدام)
      String type = 'journaling';
      if (day % 4 == 2) type = 'court';
      if (day % 4 == 3) type = 'voice';
      if (day % 4 == 0) type = 'ladder';

      // تعیین عنوان روز
      String title = 'تمرین آگاهی';
      String description = 'شناسایی الگوهای ذهنی';

      if (day == 1) {
        title = 'ملاقات با منتقد درون';
        description = 'اولین قدم: شنیدن صدای ذهن';
      } else if (day == 2) {
        title = 'دادگاه ذهن';
        description = 'به چالش کشیدن اولین فکر منفی';
      } else if (day == 3) {
        title = 'آغوش برای کودک';
        description = 'ارتباط با احساسات سرکوب شده';
      } else if (day == 4) {
        title = 'اولین اقدام شجاعانه';
        description = 'شکستن یخ ترس‌های کوچک';
      } else {
        title =
            'گام ${day}م: ${type == 'court' ? 'چالش منطقی' : (type == 'voice' ? 'شفقت‌ورزی' : (type == 'ladder' ? 'گسترش دایره امن' : 'مشاهده درونی'))}';
        description = 'ادامه مسیر رشد و تقویت عزت‌نفس';
      }

      return DayPlanModel(
        dayNumber: day,
        title: title,
        description: description,
        lessonContent: """
به روز $day از سفر ۳۰ روزه خوش آمدید.
امروز می‌خواهیم روی یکی از جنبه‌های مهم عزت‌نفس کار کنیم.

ذهن ما مثل یک عضله است. همانطور که با یک بار باشگاه رفتن بدنساز نمی‌شویم، با یک بار تمرین هم عزت‌نفس ساخته نمی‌شود. تکرار، کلید ماجراست.

در تمرین امروز، تمرکز ما بر روی "${type == 'journaling' ? 'مشاهده بدون قضاوت' : (type == 'court' ? 'منطق و استدلال' : (type == 'voice' ? 'احساس و عاطفه' : 'عمل‌گرایی'))}" است.
لطفاً متن درس را با دقت بخوانید و سعی کنید مثال‌های کتاب مرتبط را در زندگی خودتان پیدا کنید.
""",
        scientificSource:
            'برگرفته از پروتکل‌های استاندارد CBT و طرحواره‌درمانی (Schema Therapy).',
        relatedBook:
            books[index % books.length], // چرخش بین کتاب‌ها برای هر روز
        exerciseType: type,
        isLocked: false, // طبق درخواست شما همه روزها باز هستند
      );
    });
  }
}
