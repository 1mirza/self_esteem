import 'package:flutter/material.dart';
import '../models/data_models.dart';

class AppDataRepository {
  // ==========================================
  // لیست کتاب‌های مرجع (کتابخانه رشد)
  // ==========================================
  static List<BookModel> getBooks() {
    return [
      BookModel(
        id: '1',
        title: 'از حال بد به حال خوب',
        author: 'دکتر دیوید برنز',
        category: 'شناخت‌درمانی (CBT)',
        coverColor: Colors.blueAccent,
        icon: Icons.psychology,
        summary: """
این کتاب (Feeling Good) انجیل رفتاردرمانی شناختی است. ایده اصلی این است که «افکار» شما احساسات شما را می‌سازند، نه وقایع بیرونی. اگر یاد بگیرید فکرتان را عوض کنید، حالتان خوب می‌شود.
دکتر برنز ثابت می‌کند که اضطراب، افسردگی و خشم، ناشی از «خطاهای شناختی» هستند که مثل عینک‌های کثیف، واقعیت را جلوی چشم ما تیره و تار می‌کنند.
        """,
        keyLearnings: [
          'هیچ‌گاه احساسات را با واقعیت اشتباه نگیرید (استدلال احساسی).',
          'افکار منفی اتوماتیک هستند، اما لزوماً واقعی نیستند.',
          'با نوشتن افکار، قدرت آن‌ها را خنثی کنید (تکنیک سه ستونی).',
        ],
        realLifeExamples: [
          'ذهن‌خوانی: همسرم ساکت است -> حتماً از دست من عصبانی است (واقعیت: شاید خسته است).',
          'فیلتر منفی: در یک مهمانی ۱۰ نفر تعریف کردند و ۱ نفر انتقاد کرد -> کل شب به آن یک نفر فکر می‌کنم.',
          'تفکر همه یا هیچ: اگر در امتحان ۲۰ نشوم، یعنی شکست‌خورده‌ام.',
          'برچسب‌زنی: به جای اینکه بگویم "اشتباه کردم"، می‌گویم "من احمقم".',
        ],
      ),
      BookModel(
        id: '2',
        title: 'موهبت کامل نبودن',
        author: 'برنی براون',
        category: 'پذیرش خود',
        coverColor: Colors.pinkAccent,
        icon: Icons.favorite,
        summary: """
کمال‌گرایی زره‌ای است که می‌پوشیم تا آسیب نبینیم، اما این زره آنقدر سنگین است که اجازه نمی‌دهد پرواز کنیم.
پیام اصلی کتاب این است: «شجاعت یعنی با وجود تمام نقص‌هایت، خودت را نشان بدهی.» ما فکر می‌کنیم اگر کامل باشیم، دوست‌داشتنی می‌شویم. اما واقعیت این است که ما به خاطر «نقص‌هایمان» و انسان بودنمان به هم وصل می‌شویم.
        """,
        keyLearnings: [
          'شرم، ترس از قطع ارتباط است (نکند من ایرادی دارم؟).',
          'آسیب‌پذیری ضعف نیست، بلکه بزرگترین معیار شجاعت است.',
          'به جای اینکه بگویید "من چه کار اشتباهی کردم؟"، بگویید "من کافی هستم".',
        ],
        realLifeExamples: [
          'اعتراف به اشتباه: به جای پنهان کردن تپق زدن در سخنرانی، بخندید و بگویید "زبانم نچرخید!".',
          'نه گفتن: دعوت شام را رد کنید چون خسته‌اید، بدون اینکه دروغ بگویید.',
          'ظاهر واقعی: عکس بدون فیلتر و روتوش در شبکه اجتماعی بگذارید.',
        ],
      ),
      BookModel(
        id: '3',
        title: 'زندگی خود را دوباره بیافرینید',
        author: 'جفری یانگ',
        category: 'طرحواره‌درمانی',
        coverColor: Colors.purple,
        icon: Icons.child_care,
        summary: """
این کتاب به شناسایی ۱۱ «تله زندگی» (طرحواره) می‌پردازد که ریشه در کودکی دارند و مدام در زندگی بزرگسالی ما تکرار می‌شوند. تله‌هایی مثل «رهاشدگی»، «بی‌ارزشی» و «اطاعت».
راهکار اصلی، شناختن «کودک درون» آسیب‌دیده و تبدیل شدن به یک والد مهربان برای خود است.
        """,
        keyLearnings: [
          'الگوهای تکراری زندگی (شکست در روابط، شغل) تصادفی نیستند.',
          'کودک درون شما هنوز زنده است و نیاز به توجه دارد.',
          'با تغییر رفتار، طرحواره ضعیف می‌شود.',
        ],
        realLifeExamples: [
          'تله اطاعت: همیشه نظر بقیه را می‌پرسید و نظر خودتان را نمی‌گویید.',
          'تله رهاشدگی: وقتی شریک عاطفی‌تان دیر جواب می‌دهد، دچار پنیک می‌شوید.',
          'تله نقص: فکر می‌کنید اگر کسی شما را واقعی بشناسد، طردتان می‌کند.',
        ],
      ),
      BookModel(
        id: '4',
        title: 'عادت‌های اتمی',
        author: 'جیمز کلیر',
        category: 'رشد فردی',
        coverColor: Colors.orange,
        icon: Icons.trending_up,
        summary: """
تغییرات بزرگ با قدم‌های کوچک شروع می‌شوند. اگر روزی ۱ درصد بهتر شوید، در پایان سال ۳۷ برابر بهتر شده‌اید.
عزت‌نفس نتیجه‌ی «رای‌هایی» است که با عملکردهای کوچک به خودتان می‌دهید. هر بار که به باشگاه می‌روید، یک رای به هویت «من ورزشکارم» می‌دهید.
        """,
        keyLearnings: [
          'روی سیستم‌ها تمرکز کنید، نه اهداف.',
          'قانون ۲ دقیقه: هر عادت جدید را به کاری ۲ دقیقه‌ای تبدیل کنید.',
          'هویت خود را تغییر دهید: نگو "می‌خواهم سیگار را ترک کنم"، بگو "من سیگاری نیستم".',
        ],
        realLifeExamples: [
          'به جای هدف "نوشتن کتاب"، روزی ۲ خط بنویسید.',
          'محیط را طراحی کنید: اگر می‌خواهید گیتار بزنید، آن را وسط اتاق بگذارید نه در کمد.',
          'زنجیره را قطع نکنید: حتی در روزهای بد، یک حرکت کوچک انجام دهید.',
        ],
      ),
      BookModel(
        id: '5',
        title: 'شفقت با خود',
        author: 'کریستین نف',
        category: 'خوددوستی',
        coverColor: Colors.redAccent,
        icon: Icons.volunteer_activism,
        summary: """
چرا با دوستانمان مهربان‌تر از خودمان هستیم؟ این کتاب یاد می‌دهد که چگونه در زمان شکست، با خودتان مثل یک دوست صمیمی رفتار کنید.
        """,
        keyLearnings: [
          'خودانتقادی انگیزه نمی‌دهد، بلکه فلج می‌کند.',
          'درد بخشی از تجربه مشترک انسانی است.',
          'اولین کار در زمان درد، آرام کردن خود است.',
        ],
        realLifeExamples: [
          'وقتی اشتباه کردید: بگویید "اشکال نداره، دفعه بعد بهتر میشم".',
          'لمس آرامش‌بخش: دست روی قلب گذاشتن موقع استرس.',
        ],
      ),
    ];
  }

  // ==========================================
  // برنامه ۳۰ روزه (مسیر رشد با محتوای غنی)
  // ==========================================
  static List<DayPlanModel> get30DayPlan() {
    final books = getBooks();

    return List.generate(30, (index) {
      int day = index + 1;

      // الگوریتم تعیین نوع تمرین و کتاب مرجع
      String type = 'journaling';
      BookModel sourceBook = books[0]; // پیش‌فرض
      String sourceCitation =
          'منبع: کتاب «از حال بد به حال خوب»، اثر دکتر دیوید برنز، فصل سوم.';
      String bookName = 'از حال بد به حال خوب';
      String content = '';
      List<String> examples = [];

      // تعیین محتوا بر اساس هفته و روز
      if (day <= 7) {
        // هفته اول: آگاهی (CBT)
        type = 'journaling';
        sourceBook = books[0]; // دیوید برنز
        bookName = 'از حال بد به حال خوب';
        sourceCitation = 'تکنیک شناسایی افکار خودکار (NATs)';
        content = """
به روز $day خوش آمدید.
در هفته اول، هدف ما فقط «مشاهده» است. ذهن ما پر از افکار خودکار منفی است که مثل ویروس عمل می‌کنند.
امروز هر بار که حالتان بد شد، به فکرتان دقت کنید. چه پیامی به خودتان دادید؟
""";
        examples = [
          'دوستم دیر جواب داد -> فکر: حتماً از من بدش می‌آید.',
          'رئیسم انتقاد کرد -> فکر: من بی‌عرضه‌ام و اخراج می‌شوم.',
          'لیوان چای ریخت -> فکر: چقدر دست‌پاچلفتی هستم.',
          'در آینه نگاه کردم -> فکر: چقدر زشتم.',
          'کسی تعریف کرد -> فکر: حتماً دارد دروغ می‌گوید.',
        ];
      } else if (day <= 14) {
        // هفته دوم: چالش (CBT پیشرفته)
        type = 'court';
        sourceBook = books[0];
        bookName = 'از حال بد به حال خوب';
        sourceCitation = 'تکنیک بازسازی شناختی (Cognitive Restructuring)';
        content = """
در هفته دوم، یاد می‌گیریم که وکیل مدافع خودمان باشیم.
افکار منفی معمولاً اغراق‌آمیز و غیرمنطقی هستند. امروز می‌خواهیم آن‌ها را به دادگاه ببریم و با مدرک و دلیل رد کنیم.
""";
        examples = [
          'فکر: "من هیچوقت موفق نمیشم". پاسخ: "دروغ است، من قبلاً در کنکور قبول شدم."',
          'فکر: "همه از من متنفرن". پاسخ: "همه یعنی ۸ میلیارد نفر؟ مادرم که دوستم دارد!"',
          'فکر: "من احمقم". پاسخ: "من فقط یک اشتباه کردم، این هویت من نیست."',
          'فکر: "اگر این شغل را نگیرم می‌میرم". پاسخ: "ناراحت می‌شوم ولی نمی‌میرم."',
          'فکر: "باید کامل باشم". پاسخ: "هیچکس کامل نیست، من هم انسانم."',
        ];
      } else if (day <= 21) {
        // هفته سوم: کودک درون (طرحواره)
        type = 'voice';
        sourceBook = books[2]; // جفری یانگ
        bookName = 'زندگی خود را دوباره بیافرینید';
        sourceCitation = 'طرحواره‌درمانی و بازوالدینی';
        content = """
گاهی اوقات منطق جواب نمی‌دهد چون درد ما احساسی است.
امروز می‌خواهیم با «کودک درون» ارتباط برقرار کنیم. آن بخش از وجود شما که هنوز ۵ ساله است و نیاز به محبت و توجه دارد.
""";
        examples = [
          'وقتی غمگینید، چشمانتان را ببندید و خود کوچک‌تان را بغل کنید.',
          'به عکس کودکی خود نگاه کنید و بگویید "چقدر دوست‌داشتنی هستی".',
          'برای کودک درونتان یک هدیه کوچک (مثل بستنی) بخرید.',
          'با لحن مهربان به خودتان بگویید: "نترس، من (بخش بزرگسال) مراقبتم".',
          'وقتی اشتباه کردید، به جای تنبیه، او را دلداری دهید.',
        ];
      } else {
        // هفته چهارم: اقدام (رفتاردرمانی و عادات)
        type = 'ladder';
        sourceBook = books[3]; // جیمز کلیر
        bookName = 'عادت‌های اتمی';
        sourceCitation = 'تکنیک‌های فعال‌سازی رفتاری و مواجهه';
        content = """
عزت‌نفس با «انجام دادن» ساخته می‌شود.
امروز نردبان ترس را می‌سازیم. کارهایی که از آن‌ها می‌ترسید را لیست کنید و قدم به قدم با آن‌ها روبرو شوید. هر اقدام کوچک، یک پیروزی بزرگ است.
""";
        examples = [
          'پرسیدن آدرس از یک غریبه (ترس اجتماعی).',
          'نه گفتن به یک درخواست کوچک (ترس از طرد شدن).',
          'پوشیدن لباسی که دوست دارید (ترس از قضاوت).',
          'ارسال پیام به یک دوست قدیمی (ترس از نادیده گرفته شدن).',
          'ارائه نظر مخالف در جمع دوستانه (ابراز وجود).',
        ];
      }

      // عناوین خاص برای روزهای کلیدی
      String title = 'گام ${day}م: تمرین روزانه';
      String description = 'ادامه مسیر رشد';

      if (day == 1) {
        title = 'ملاقات با منتقد درون';
        description = 'شروع سفر خودشناسی';
      }
      if (day == 8) {
        title = 'دادگاه ذهن';
        description = 'وکیل مدافع خودت باش';
      }
      if (day == 15) {
        title = 'آغوش برای کودک';
        description = 'ملاقات با کودک درون';
      }
      if (day == 22) {
        title = 'نردبان شجاعت';
        description = 'اقدام علیه ترس‌ها';
      }

      return DayPlanModel(
        dayNumber: day,
        title: title,
        description: description,
        lessonContent: content,
        lessonExamples: examples, // لیست ۵ مثال
        scientificSource: sourceCitation,
        sourceBookName: bookName, // نام کتاب
        relatedBook: sourceBook,
        exerciseType: type,
        isLocked: false, // همه روزها باز هستند
      );
    });
  }
}
